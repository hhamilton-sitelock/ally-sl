#!/bin/bash
#                             SITELOCK ANALYST ALLY
#                                       ,:                                             
#                                   .;;;::''':                                         
#                               .:;;:,,:::::::;';,                                     
#                           .:::,,,,,,::::::::::::;;;,                                 
#                       `:::,,,,,,,,::::`.::::::,,,,,,:::.                             
#                   `,,,,.,,,,,,,,,:::::,:::::,,,,,,,,,...,,,.                         
#               `.,,,..,.,,,,,,,,::::::::::::,,,,,,,,,...........`                     
#           `.,,.......,,,,,,,,,,::::::::::,,,,,,,,,.......```````..``                 
#        .............,,,,,,,,,:::::::::::,,,,,,,,........```````   `````              
#    `..............,,,,,,,,,,:::::::;''++';:,,,,........```````   ```````````         
#  ``````..........,,,,,,,,,,::::;''++++++++++'::......```````    ``````````.`.        
#  .``............,,,,,,,,:,:;''++++'+'''''''+++'+;,,.```````    ``````````....        
#  .``..........,,,,,,,,,;;'++++++'''''''''''''''+++++;..```   ``````````.`....        
#  `.....,.....,,,,,,:;'++++++'''''''''''''''''''''''+++++:`` ````````````.:...        
#  `....,:....,,,::;++++++++''''''''''''''''''''''''''''++++++:````````...:,...        
#   .........,:;'++++++++'''''''''''''''''''''''''''''''''++++++++:````........        
#   .......:+++++++++++'''''''''''''''''''''''''''''''''''''++++++++++:........        
#   ,......:+++++++++''''''''''''''''''''''''''''''''''''''''+++++++++'.....,,`        
#   ,....,,:+++++++''''''''''''''''''''''''''''''''''''''''''''+++++++:....,,,         
#   ,..,,,,:+++++++'''''''''''''''''''''+#+''''''''''''''''''''''+++++,...,,,.         
#   ,.,,,,,:++++++'''''''''''''''''''#@@@@@@@@'''''''''''''''''''+++++...,,,,.         
#   ,,,,,,,,+++++''''''''''''''''''#@@@@@@@@@@@@''''''''''''''''''++++.,,,,,,,         
#   `,,,,,,,+++++'''''''''''''''''@@@@@@@@@@@@@@@'''''''''''''''''++++.,,,,,,,         
#    :,,,,,,'+++'''''''''''''''''#@@@@@@@@@@@@@@@@'''''''''''''''''+++,,,,,,,,         
#    :,,,,::'+++''''''''''''''''+#@@@@@'''''#@@@@@@''''''''''''''''+++,,,,,,,`         
#    ;,,,:::'+++''''''''''''''''@@@@@#'''''''+@@@@@''''''''''''''''++',,,,::,          
#    ;,,::::'++'''''''''''''''''@@@@#'''''''''+@@@@@'''''''''''''''++:,,,,::,          
#    ;,:::::;++''''''''''''''''@@@@@'''''''''''@@@@@'''''''''''''''++,,,::::,          
#    ,:::::::++''''''''''''''''@@@@@'''''''''''+@@@@'''''''''''''''++,::::::,          
#    `:::::::++''''''''''''''''@@@@#''''''''''''@@@@''''''''''''''''+,:::::::          
#     '::::::'+''''''''''''''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''''''++:::::::.          
#     '::::::;+''''''''''''''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''''''++:::::::`          
#     '::::,,;+''''''''''''''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''''''';:::::::           
#     ':::,,,:+''''''''''''''@@@@@@@@@@@@@@@@@@@'+@@@@+''''''''''''+::::::::           
#     ,::,,,,,+''''''''''''''@@@@@'''''''''''';''''#@@+''''''''''''+,:::::::           
#      :,,,,,,+''''''''''''''@@@@@            `''''@@@+'''''''''''++:::::::,           
#      ;,,,,,,;+'''''''''''''@@@@@            ''''@@@@'''''''''''''+:::::::`           
#      ;,,,,,,:+'''''''''''''@@@@@           ''''+@@@@''''''''''''''::::::,            
#      ;,,,,..,+'''''''''''''@@@@@    `     :''';+@@@@''''''''''''+;:::::,,            
#      ,,,,....+'''''''''''''@@@@@   `'`   `'''' +@@@@+'''''''''''+:::::,,,            
#       ,,.....+'''''''''''''@@@@@   '''.  ''''  #@@@@+'''''''''''+::::,,,.            
#       :......:'''''''''''''@@@@@  ''''',''''`  #@@@@+''''''''''''::,,,,,`            
#       :......,'''''''''''''@@@@@   ;''''''',   #@@@@+''''''''''';:,,,,..             
#       ,....``.+''''''''''''@@@@@    ;''''';    #@@@@+''''''''''',,,,,...             
#       `...````+''''''''''''@@@@@     ,'''' `   #@@@@+''''''''''+,,,,....             
#        ,``````:''''''''''''@@@@@      `''```   #@@@@+''''''''''+,,,....`             
#        ,``````.''''''''''''@@@@@      ``.` `   #@@@@+'''''''''+;,......              
#        .````` `+'''''''''''@@@@@   ``````````  #@@@@+'''''''''+,.......              
#         ````   ''''''''''''@@@@@```````````    +@@@@+'''''''''+.......`              
#         .``    `+''''''''''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''''.......`              
#         .    ```+''''''''''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''+........               
#         `` ` ```;'''+++++''@@@@@@@@@@@@@@@@@@@@@@@@@+''''''''+... ....               
#          ```.,```++++++++++@@@@@@@@@@@@@@@@@@@@@@@@@+'''''''+:..`,:```               
#          ```,:```+++++++++''''''''''''''''''''''''''''''''''+...`....                
#           ````````+++++++++''''''''''''''''''''''''''''''''+,`..``..`                
#           ```````.:++++++++''''''''''''''''''''''''''''''++'`......`                 
#           `````....'+++++++'''''''''''''''''''''''''''''+++`........                 
#            ```......;++++++'''''''''''''''''''''''''''''+'`........`                 
#            ``.......,,++++++''''''''''''''''''''''''''++:`.......`.                  
#             ........,,.++++++''''''''''''''''''''''''++..`........                   
#              ......,,,,,'++++++''''''''''''''''''''++'`.........``                   
#               ....,,,,,,,,++++++'''''''''''''''''+++,...........`                    
#                ..,,,,,,,,,,;++++++'''''''''''''+++'............`                     
#                 .,,,,,,,::::,++++++''''''''''''++,............`                      
#                  .,,,,,::::::::++++++'''''''+++;``...........                        
#                   `,,,::::::::;:'+++++++++++++`..`..........                         
#                     ,,::::::::::::'+++++++++..........`.`.`                          
#                      .::::::::::::,,++++++:..`...........                            
#                        ::::::::::,,,,,#+:..............`                             
#                         ,:;::::,,,,,.....`............                               
#                           ::::,,,,.....``...........                                 
#                            `,,,,,..... ...........`                                  
#                              .,,.....`.,.........                                    
#                                .......,;.......`                                     
#                                  .`........`.`                                       
#                                   `........`                                         
#                                     `.`.``                                           
#                                       `.                                             
#**************************************************************#
# Short Name: ALLY                                             #
# Description: This script performs a number of automated      #
# scans against one or more provided SiteLock Site IDs.        #
#                                                              #
#******* VERIFY ***********************************************#
#
if ! sudo -v; then

	printf "\nYou must provide your sudo user password.\n\nQuitting.\n\n"

	exit 1
fi
#
#
#******* CONFIGURE ********************************************#
#
export abspath=$( cd "$( dirname "$( readlink -f "${BASH_SOURCE[0]}" )" )" && pwd )
#
sourcedscript=$(basename $0)
#
source $abspath/config/init.config.sh
#
parseoptions "$@"
#
addcolor
#
#
#******* RESET ************************************************#
#
resetfilemaps
#
#
#******* GREET ************************************************#
#
displaygreeting
#
#
#******* PROCESS **********************************************#
#
process
#
#
#******* EXIT *************************************************#
#
exit 1